---
import Layout from "../layouts/Layout.astro";
import blog from "../data/blog.json";

// Sort blog posts by date (newest first)
const sortedBlog = [...blog].sort((a, b) => b.date.localeCompare(a.date));

function formatDate(dateStr: string): string {
  const date = new Date(dateStr);
  return date.toLocaleDateString("en-US", { year: "numeric", month: "long" });
}
---

<Layout
  title="Blog Posts - Abhijeet Prasad"
  description="All blog posts by Abhijeet Prasad"
>
  <header>
    <a href="/" class="back-link">&larr; Back to home</a>
    <h1>Blog Posts</h1>
  </header>

  <section>
    {
      sortedBlog.map((post) => (
        <article class="card">
          <h3>{post.title}</h3>
          <p class="meta">{formatDate(post.date)}</p>
          <p class="description">{post.description}</p>
          <div class="links">
            <a href={post.url} target="_blank" rel="noopener noreferrer">
              Read Post
            </a>
          </div>
        </article>
      ))
    }
  </section>
</Layout>

<style>
  header {
    margin-bottom: var(--spacing-lg);
  }

  .back-link {
    display: inline-block;
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    font-size: 0.875rem;
  }

  .back-link:hover {
    color: var(--color-accent);
  }
</style>
